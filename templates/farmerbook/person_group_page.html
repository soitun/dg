<div class="modal-body" style="padding:3px; border:5px solid #666666;">  
<div id = "content" style="width:710px;">
<div class='vil_left_panel' style="margin-left:0px;">
	<div class="left_panel_top" >
		<div id="name_label" ><center> {{ left_panel_stats.group_details.0.1 }} </center></div>
		<div id="district_label" ><center> 
			<a href="javascript:void(0)" onclick="villageClick({{ left_panel_stats.group_details.0.6 }})">
				{{ left_panel_stats.group_details.0.2 }}</a></center>
			</div>
		<div id="district_label" ><center> {{ left_panel_stats.group_details.0.4 }}, {{ left_panel_stats.group_details.0.5 }}</center></div>
		<div class="group_label" > <center> Started: {{ left_panel_stats.start_date }}</center></div>	
	</div>
	<div class="left_panel_bottom" style="padding-top:0px;">
		<div class='horizontal_line'> </div>
		<div class= 'statsLabel'> Members</div>
		<div class = 'statsValue'> {{ left_panel_stats.group_members }} </div>
		<div class='horizontal_line'> </div>
		<div class= 'statsLabel'> Videos Watched</div>
		<div class = 'statsValue'> {{ left_panel_stats.videos_watched }} </div>
		<div class='horizontal_line'> </div>
		<div class= 'statsLabel'> Questions Asked</div>
		<div class = 'statsValue'> {{ left_panel_stats.tot_questions }} </div>
		<div class='horizontal_line'> </div>
		<div class= 'statsLabel'> Adoptions</div>
		<div class = 'statsValue'> {{ left_panel_stats.tot_adoptions }} </div>
		<div class='horizontal_line'> </div>
		<div class = "imgContainerLabel">Partner</div>
		<div class= 'statsLabel' style="width:50px; height:50px;float:left;"> 
			<img  src='http://digitalgreen.org/media/Output/Images/partner/baif_logo1.PNG'>
		</div>
		<div style="float:right; margin-right:15px;margin-top:15px;" > {{ left_panel_stats.partner.0.1 }} </div>
		<div style="clear:both;"></div>
		<div class='horizontal_line'> </div>
		<div class = "imgContainerLabel">Service Provider</div>
		<img  style= "float:left; width:150px; height:100px; margin-left: 5px;"src=''>		
		<div class = "imgLabel"> {{ left_panel_stats.service_provider.0.1 }}</div>
		<div style='clear:both;'></div>
	</div>
</div>

<div class='content_top' style="margin-left:255px;height:auto;">
    <div id="closeButton" style="float:right; margin-top:-5px;margin-left:5px;">  <a class="close" data-dismiss="modal">x</a> </div>
	<div id="tabs">
		<div id='toptabs'> 
			<ul>
				<li id='tabsli' class='playli tabsliselect' onClick="ajax_tab_click('groups_videos_watched', {{ left_panel_stats.group_details.0.0 }} )"> <span>Videos Watched ( {{ left_panel_stats.videos_watched }} )</span></a> </li>
				<li id='tabsli' class='giftsli' onClick="ajax_tab_click('groups_videos_produced', {{ left_panel_stats.group_details.0.0 }} )" > 
				<span>Videos Produced ( {{ left_panel_stats.videos_produced }} )</span></a> </li>				
			</ul>
		</div>
		<div class='vil_tabcontent' id="top_tabcontent" style="height:215px;" style='width:100%; margin:0px;'>
			<div class="carousel slide span8" id="myCarousel" style="width:710px; height:215px; margin-bottom:0px;">
				<div class="carousel-inner">				
				{% for vid in videos_watched_stats %}
						{% if forloop.counter0|divisibleby:"5" %}				    
								<div class="item{% if forloop.first %} active{%endif%}">							
								<ul class="thumbnails" style="margin-left:28px; margin-top:5px;">										
						{% endif%}
						<li class="vidsWatchedItem">
							<div class="thumbnail">
								<a href="http://digitalgreen.org/analytics/video/?id={{ vid.id }}" target='_blank'>
								<img src="http://img.youtube.com/vi/{{ vid.youtubeid }}/2.jpg" alt="">
								</a>
							</div>
							<div class="video_title" title='Last seen on {{ vid.last_seen_date|date:"M d, Y" }}' style="margin-top:0px;" ><a href="http://digitalgreen.org/analytics/video/?id={{ vid.id }}" target='_blank' >{{ vid.title }}</a> </div>
							{% if vid.last_seen_date %}
								<div class="question" style="margin-top:0px;">Last seen on <br>{{ vid.last_seen_date|date:"M d, Y" }} </div>
							{% endif %}	
							{% if vid.adopters %}
								<div class="question" style="margin-top:0px;">{{ vid.adopters }} adopters </div>
							{% endif %}
							{% if vid.questioners %}
							    <div class="question" style="margin-top:0px;">{{ vid.questioners }} questioners </div>
							{% endif %}
							{% if vid.interested %}
							    <div class="question" style="margin-top:0px;">{{ vid.interested }} interested </div>
							{% endif %}
						</li>
						{% if forloop.counter|divisibleby:"5" and not forloop.first or forloop.last %}						    
							</div>							
							</ul>										
						{% endif%}
				{% endfor %}					
				</div>
				<a data-slide="prev" href="#myCarousel" class="left carousel-control" style="margin-left:-40px;"><</a>
				<a data-slide="next" href="#myCarousel" class="carousel-control" style="margin-left:650px !important">></a>
			</div>
    	</div>
		<div style="height:1px;"> </div>
		<div id='toptabs'> 
			<ul>
				<li id='tabsli' class='playli tabsliselect'> <span>Top Adopters</span></a> </li>
				<li id='tabsli' class='giftsli'> <span>Top Viewers</span></a> </li>				
			</ul>
		</div>
		<div class='vil_tabcontent' id="tabcontent" style='width:100%; margin:0px; height:313px;'>
				<div class="carousel slide span8" id="lbCarousel" style="width:710px;">
				<div class="carousel-inner" style="height:300px;">				
				{% for person in top_adopters_stats %}
						{% if forloop.counter0|divisibleby:"3" %}				    
								<div class="item{% if forloop.first %} active{%endif%}">							
								<ul class="thumbnails" style="margin-left:24px; margin-top:1px;height:310px;">										
						{% endif%}
						<li style="margin-left:2px;margin-top:-9px;">
							<div  class= 'farmer_details_container'>
							<img  src="https://s3.amazonaws.com/dg_farmerbook/2/{{ person.id }}.jpg">
							<div class='farmer_name'> <a href="javascript:void(0);" onclick="person_click({{ person.id }})">{{ person.name }}</a> </div>
							<div class='last_adopted' style="height: 36px; overflow:hidden;"> Last adopted({{ person.date_of_adoption|date:"M d,Y" }}) : {{ person.title }} on  </div>
							<div id="progress_bar_label" style="margin-right:5px;"> Adoption Rate </div>
							<div class="progress progress-striped">
							  <div class="bar "  style="width: {{ person.adoption_rate|floatformat:0 }}%; "><p> {{ person.adoption_rate|floatformat:0 }}%</p></div>
							</div>
							<div id = 'progress_bar_content'>
								<div style="margin-right:10px; float:left; font-weight:bold; width:80px"> {{ person.date_of_joining|date:"M d,Y" }} </div>
								<div style="margin-right:33px; float:left; font-weight:bold; width:25px"> {{ person.views }} </div>
								<div style="margin-right:0px; float:left; font-weight:bold"> {{ person.adoptions }}	</div>
								<div style="clear:both;"></div>
								<div style="margin-right:57px; float:left;"> Joined </div>
								<div style="margin-right:25px; float:left;"> Views	</div>
								<div style="margin-right:0px; float:left;"> Adopted </div>		
							</div>
							</div>
						</li>
						{% if forloop.counter|divisibleby:"3" and not forloop.first or forloop.last %}						    
							</div>							
							</ul>										
						{% endif%}
				{% endfor %}					
				</div>
				<a data-slide="prev" href="#lbCarousel" class="left carousel-control" style="margin-left:-34px;"><</a>
				<a data-slide="next" href="#lbCarousel" class="carousel-control" style="margin-left:650px !important">></a>
			</div>
				
			</div>			
    	</div>		
  </div>
</div>
<script type="text/javascript">
var videos_watched_html;
function person_click(person_id) {
	$("#myModal").html("");
	$("#myModal").load('http://127.0.0.1:8000/getpersonpage?person_id='+person_id, function(response, status, xhr) {
		  if (status == "error") {
			var msg = "Sorry but there was an error: ";
			alert(msg + xhr.status + " " + xhr.statusText);
		  }
		  //alert('Load was performed.');
		 // alert($("div#content").html());
		  });
}

function ajax_tab_click(clicked, village_id) {    
    if(clicked=="videos_produced") {
		videos_watched_html = $("div#top_tabcontent").html();
		//alert(videos_watched_html);
		$("div#top_tabcontent").html("");
		//alert('here in ajax tab click');
		$("div#top_tabcontent").load('http://127.0.0.1:8000/getvideosproduced?village_id='+village_id, function(response, status, xhr) {
		  if (status == "error") {
			var msg = "Sorry but there was an error: ";
			alert(msg + xhr.status + " " + xhr.statusText);
		  }
		  //alert('Load was performed.');
		  //alert($("div#top_tabcontent").html());
		});
		$("li").removeClass("tabsliselect");
		//$("#tabsli a").css("color","#330000");
		//$(".produced a").css("color","#ffffff");
		$(".giftsli").addClass("tabsliselect");
		$(".giftsli").removeAttr('href');
	} else if (clicked=="videos_watched") {
		$("div#top_tabcontent").html("");
		$("div#top_tabcontent").html(videos_watched_html);
		//alert(videos_watched_html);
		$("li").removeClass("tabsliselect");
		//$("#tabsli a").css("color","#330000");
		//$(".produced a").css("color","#ffffff");
		$(".playli").addClass("tabsliselect");
		$(".playli").removeAttr('href');
	}
	//alert($("div#top_tabcontent").html());
	//$("li").removeClass("active");	
	//$("#home").addClass("active");
}
</script>
</div>
